(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{40:function(e,t,a){},42:function(e,t,a){},56:function(e,t,a){e.exports=a(79)},61:function(e,t,a){},72:function(e,t,a){},76:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(11),o=a.n(c),i=(a(61),a(24)),l=a(54),s=a(8),u=a.n(s),m=a(16),p=Object({NODE_ENV:"production",PUBLIC_URL:""}).api_key||"MYiJh6BXB2M73G7QJ7GOitkVtihQAITI",f=function(e){var t,a;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t="http://dataservice.accuweather.com/currentconditions/v1/".concat(e,"?apikey=").concat(p,"&details=true"),r.next=4,u.a.awrap(fetch(t));case 4:return a=r.sent,r.next=7,u.a.awrap(a.json());case 7:return r.abrupt("return",r.sent);case 10:return r.prev=10,r.t0=r.catch(0),console.log("Following error accured while trying to fetch data: ".concat(r.t0)),r.abrupt("return",{});case 14:case"end":return r.stop()}}),null,null,[[0,10]])},d=function(e,t){var a,r;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a="http://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(e,"?apikey=").concat(p,"&metric=").concat(t),n.next=4,u.a.awrap(fetch(a));case 4:return r=n.sent,n.abrupt("return",r.json());case 8:return n.prev=8,n.t0=n.catch(0),console.log("Following error accured while trying to fetch data: ".concat(n.t0)),n.abrupt("return",{});case 12:case"end":return n.stop()}}),null,null,[[0,8]])},v=(a(40),["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]);function h(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var y=function(e,t){var a=t?e.Metric:e.Imperial;return"".concat(a.Value,"\xb0").concat(a.Unit)},b=function(e){return e<10?"https://apidev.accuweather.com/developers/Media/Default/WeatherIcons/0".concat(e,"-s.png"):"https://apidev.accuweather.com/developers/Media/Default/WeatherIcons/".concat(e,"-s.png")},E=a(17),g=function(e){var t=e.temperature,a=e.text,r=e.date,c=e.city,o=e.link,i=e.icon;return n.a.createElement("div",{className:"item card"},n.a.createElement("h3",null,c),r&&n.a.createElement("h4",null,function(e){var t=new Date(e);return v[t.getDay()]}(r)),n.a.createElement("h5",{className:"card-title"},t),n.a.createElement("p",{className:"card-text"},a),o&&n.a.createElement(E.b,{to:"/main".concat(o)},n.a.createElement("button",{className:"btn btn-primary"},"See weather")),i&&n.a.createElement("img",{src:b(i),alt:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/85/Smiley.svg/1024px-Smiley.svg.png"}))},j=function(e){var t=e.forecast;return n.a.createElement("div",{className:"frame"},t.DailyForecasts.map((function(e,a){var r="".concat(function(e,t){var a=parseFloat(e),r=parseFloat(t);return"".concat(Math.min(a,r)," - ").concat(Math.max(a,r))}(t.DailyForecasts[a].Temperature.Minimum.Value,t.DailyForecasts[a].Temperature.Maximum.Value),"\xb0").concat(t.DailyForecasts[a].Temperature.Maximum.Unit);return n.a.createElement(g,{key:a,temperature:r,text:t.DailyForecasts[a].Day.IconPhrase,icon:t.DailyForecasts[a].Day.Icon,date:t.DailyForecasts[a].Date})})))},w=a(26),O=a(82),x=a(83),k=function(e){var t="fa fa-heart";return e.liked||(t+="-o"),n.a.createElement("i",{className:t,"aria-hidden":"true",style:{cursor:"pointer"},onClick:e.onClick})},N=(a(42),Object(m.b)((function(e){return{favorites:e.favorites,isMetric:e.isMetric}}),(function(e){return{addToFavorites:function(t){return e({type:"Add favorite",payload:t})},removeFromFavorites:function(t){return e({type:"Remove favorite",payload:t})}}}))((function(e){var t=e.locationObj,a=e.favorites,c=e.addToFavorites,o=e.removeFromFavorites,l=e.isMetric,s=Object(r.useState)({curWeatherObj:{},forecastWeatherObj:{}}),m=Object(i.a)(s,2),p=m[0],v=m[1],E=Object(r.useState)(!1),g=Object(i.a)(E,2),N=g[0],F=g[1];Object(r.useEffect)((function(){!function(){var e,r;u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.awrap(d(t.Key,l));case 2:return e=n.sent,n.next=5,u.a.awrap(f(t.Key));case 5:r=n.sent,v({curWeatherObj:r[0],forecastWeatherObj:e}),F((c=t.Key,o=a,Object.keys(o).includes(c)));case 8:case"end":return n.stop()}var c,o}))}()}),[t,a,l]);return n.a.createElement(n.a.Fragment,null,!h(p.curWeatherObj)&&n.a.createElement(w.a,null,n.a.createElement(O.a,{style:{textAlign:"center"}},n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a,{className:"justify-content-center"},n.a.createElement("h2",null,t.LocalizedName," "),n.a.createElement(k,{liked:N,onClick:function(){N?o(t.Key):c({key:t.Key,object:{cityName:t.LocalizedName,temperature:p.curWeatherObj.Temperature,text:p.curWeatherObj.WeatherText}}),F(!N)}})),n.a.createElement("h1",null,y(p.curWeatherObj.Temperature,l)),n.a.createElement("p",null,p.curWeatherObj.WeatherText),n.a.createElement("img",{src:b(p.curWeatherObj.WeatherIcon),alt:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/85/Smiley.svg/1024px-Smiley.svg.png"}),n.a.createElement("p",{className:"card-text"},n.a.createElement("small",{className:"text-muted"},"Last updated on ",(new Date).toLocaleTimeString({timeStyle:"short"})))))),!h(p.forecastWeatherObj)&&n.a.createElement(j,{forecast:p.forecastWeatherObj}))}))),F=a(84),M=a(47),T=a.n(M),W=a(18),D=function(){var e=Object(W.f)(),t=e.city,a=e.cityid,c=Object(r.useState)(t&&a?{Key:a,LocalizedName:t}:{Key:"215854",LocalizedName:"Tel Aviv"}),o=Object(i.a)(c,2),s=o[0],m=o[1],f=T.a.debounce((function(e){return d(e)}),500),d=function(e){if(e)return new Promise((function(t,a){var r;(function(e){var t,a;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t="http://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=".concat(p,"&q=").concat(e),r.next=4,u.a.awrap(fetch(t));case 4:return a=r.sent,r.abrupt("return",a.json());case 8:return r.prev=8,r.t0=r.catch(0),console.log("Following error accured while trying to fetch data: ".concat(r.t0)),r.abrupt("return",{});case 12:case"end":return r.stop()}}),null,null,[[0,8]])})(e).then((function(e){r=e?e.map((function(e){return{value:e.Key,label:e.LocalizedName}})):[],t(r)}))}))};return n.a.createElement(n.a.Fragment,null,n.a.createElement(O.a,{style:{marginTop:"1%"}},n.a.createElement(x.a,{className:"justify-content-center"},n.a.createElement(F.a,{sm:6},n.a.createElement(l.a,{cacheOptions:!0,defaultOptions:!0,isClearable:!0,className:"basic-single",classNamePrefix:"select",name:"search",loadOptions:function(e){return f(e)},onChange:function(e){m({Key:e.value,LocalizedName:e.label})}})))),n.a.createElement(N,{locationObj:s}))},S=Object(m.b)((function(e){return{favorites:e.favorites,isMetric:e.isMetric}}))((function(e){var t=e.favorites,a=e.isMetric;return n.a.createElement(w.a,null,n.a.createElement("h2",null,"My Favorites"),n.a.createElement("div",{className:"frame"},Object.keys(t).map((function(e,r){return n.a.createElement(g,{key:r,city:t[e].cityName,temperature:y(t[e].temperature,a),text:t[e].text,link:"/".concat(t[e].cityName,"/").concat(e)})}))))})),I=function(){return n.a.createElement("h1",null,"Page not found!")},C=a(85),L=a(86),K=(a(72),a(48)),z=a.n(K);a(76);var P=Object(m.b)((function(e){return{isMetric:e.isMetric}}),(function(e){return{changeTempType:function(){return e({type:"Toggle temperature",payload:t});var t}}}))((function(e){var t=e.isMetric,a=e.changeTempType;return n.a.createElement(n.a.Fragment,null,n.a.createElement(E.a,null,n.a.createElement(C.a,{bg:"light",expand:"sm"},n.a.createElement(E.b,{className:"navbar-brand",to:"/main"},"Weather"),n.a.createElement(C.a.Toggle,{"aria-controls":"basic-navbar-nav"}),n.a.createElement(C.a.Collapse,{id:"basic-navbar-nav"},n.a.createElement(L.a,{className:"mr-auto",style:{alignItems:"center"}},n.a.createElement(E.b,{className:"nav-link",to:"/main"},"Main"),n.a.createElement(E.b,{className:"nav-link",to:"/favorites"},"Favorites"),n.a.createElement(z.a,{defaultChecked:t,icons:{checked:"C",unchecked:"F"},onChange:function(){return a()}})))),n.a.createElement(W.c,null,n.a.createElement(W.a,{exact:!0,path:"/"},n.a.createElement(D,null)),n.a.createElement(W.a,{exact:!0,path:"/main"},n.a.createElement(D,null)),n.a.createElement(W.a,{path:"/main/:city/:cityid"},n.a.createElement(D,null)),n.a.createElement(W.a,{exact:!0,path:"/favorites"},n.a.createElement(S,null)),n.a.createElement(W.a,{path:"**"},n.a.createElement(I,null)))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=a(25),B=a(21),V={favorites:{},isMetric:!0},J=Object(A.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Add favorite":var a=Object(B.a)({},e.favorites);return a[t.payload.key]=t.payload.object,Object(B.a)({},e,{favorites:a});case"Remove favorite":var r=Object(B.a)({},e.favorites),n=t.payload;return delete r[n],Object(B.a)({},e,{favorites:r});case"Toggle temperature":return Object(B.a)({},e,{isMetric:!e.isMetric});default:return e}}));o.a.render(n.a.createElement(m.a,{store:J},n.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[56,1,2]]]);
//# sourceMappingURL=main.f84327be.chunk.js.map